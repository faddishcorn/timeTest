<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-0T7KS3WZ0E"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-0T7KS3WZ0E");
    </script>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-M32KC9CG");
    </script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>나의 1분은 몇 초일까? - 시간 인지 능력 테스트</title>
    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="나이가 들수록 시간이 빨리 가는 이유를 직접 확인해보세요! 1분을 마음속으로 세어보고, 당신의 시간 감각이 어느 연령대와 비슷한지 알아보세요."
    />
    <meta
      name="keywords"
      content="시간 인지 테스트, 시간 감각, 1분 세기, 시간 심리, 뇌과학, 연령별 시간, Time Perception Test"
    />

    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta
      property="og:title"
      content="나의 1분은 몇 초일까? - 시간 인지 능력 테스트"
    />
    <meta
      property="og:description"
      content="나이가 들수록 시간이 빨리 가는 이유, 직접 확인해보세요! 당신의 1분은 몇 초인가요?"
    />
    <meta
      property="og:image"
      content="https://placehold.co/1200x630/1a73e8/ffffff?text=Time%20Test!&font=noto-sans-kr"
    />
    <meta property="og:url" content="https://timetest1minute.netlify.app" />
    <meta property="og:type" content="website" />

    <style>
      /* Google Fonts Noto Sans KR */
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap");

      /* Basic Reset and Global Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans KR", sans-serif;
        background-color: #f0f2f5;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
      }

      /* Main container for the application */
      .container {
        background-color: white;
        padding: 2.5rem;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 100%;
        max-width: 550px;
        transition: all 0.3s ease;
      }

      /* Headings and Instructions */
      h1 {
        font-size: 2rem;
        color: #1a73e8;
        margin-bottom: 0.75rem;
      }

      .instructions {
        font-size: 1rem;
        color: #5f6368;
        line-height: 1.6;
        margin-bottom: 2.5rem;
      }

      /* Buttons */
      .btn {
        background-color: #1a73e8;
        color: white;
        border: none;
        border-radius: 8px;
        padding: 1rem 2rem;
        font-size: 1.25rem;
        font-weight: 700;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.1s;
        width: 100%;
        max-width: 300px;
        margin: 0.5rem 0;
        user-select: none; /* Prevents text selection on double-tap */
      }

      .btn:hover {
        background-color: #1558b3;
      }

      .btn:active {
        transform: scale(0.97);
      }

      #timerButton.running {
        background-color: #d93025;
      }

      #timerButton.running:hover {
        background-color: #a50e0e;
      }

      /* Timer display */
      #display {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1a73e8;
        margin-top: 1.5rem;
        min-height: 50px; /* Prevents layout shift */
      }

      /* Language selector styles */
      .language-selector {
        position: absolute;
        top: 20px;
        right: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .language-selector label {
        color: #666;
        font-size: 0.9rem;
      }

      .language-selector select {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.9rem;
        background-color: white;
        cursor: pointer;
      }

      .language-selector select:hover {
        border-color: #1a73e8;
      }

      /* Class to hide elements */
      .hidden {
        display: none;
      }

      /* result sections */
      #result-section h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
      }

      /* User's specific result */
      #userResult {
        font-size: 1.2rem;
        font-weight: 500;
        color: #333;
        background-color: #e8f0fe;
        line-height: 1.7;
        padding: 1.5rem;
        border-radius: 8px;
        margin: 1.5rem 0;
      }

      #userResult .time-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: #d93025;
        display: block;
        margin-bottom: 1rem;
      }

      /* Footer Styles */
        footer {
            text-align: center;
            padding: 1rem;
            font-size: 0.9rem;
            color: #888;
            width: 100%;
        }

        footer a {
            color: #555;
            text-decoration: none;
            cursor: pointer;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5); /* Dimmed background */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            position: relative;
            line-height: 1.8;
            text-align: left;
        }
        
        .modal-content h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
        }

        .modal-content a {
            color: #1a73e8;
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: #000;
        }

      /* Responsive design for smaller screens */
      @media (max-width: 600px) {
        body {
          padding: 10px;
        }
        .container {
          padding: 1.5rem;
        }
        h1 {
          font-size: 1.8rem;
        }
        .instructions {
          font-size: 0.95rem;
          margin-bottom: 2rem;
        }
        .btn {
          padding: 0.8rem 1.5rem;
          font-size: 1.1rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-M32KC9CG"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="language-selector">
      <label for="languageSelect">언어 / Language</label>
      <select id="languageSelect">
        <option value="ko">한국어</option>
        <option value="en">English</option>
      </select>
    </div>
    <div class="container">
      <!-- Initial Screen: Instructions and Start Button -->
      <div id="timer-section">
        <h1>나의 1분은 몇 초일까? ⏱️</h1>
        <p class="instructions">
          아래 "시작" 버튼을 누르고 눈을 감은 채 마음속으로 1분(60초)을
          세어보세요.<br />
          1분이 되었다고 생각하는 순간 버튼을 다시 누르거나 스페이스바를
          누르세요.
        </p>
        <button id="timerButton" class="btn">시작</button>
        <div id="display"></div>
      </div>

      <!-- Result Screen -->
      <div id="result-section" class="hidden">
        <h2>테스트 결과</h2>
        <div id="userResult"></div>
        <button id="tryAgainButton" class="btn">다시 테스트하기</button>
      </div>
      <footer>
        <p><a id="privacy-link">개인정보 처리방침</a></p>
      </footer>
    </div>
    <!-- Modal Structure for Privacy Policy -->
    <div id="privacy-modal" class="modal hidden">
      <div class="modal-content">
        <span id="close-button" class="close-button">&times;</span>
        <h2>개인정보 처리방침</h2>
        <p>
          '나의 1분은 몇 초일까? - 시간 인지 능력 테스트'(이하 '서비스')는
          귀하의 개인정보를 소중하게 생각하며, 개인정보 보호 관련 법규를
          준수하고 있습니다. 본 서비스는 별도의 회원가입 절차 없이 익명으로 이용
          가능하며, 개인을 식별할 수 있는 어떠한 정보도 수집하지 않습니다.
        </p>
        <p>
          <strong
            >서비스 품질 향상 및 통계 분석을 위한 Google 애널리틱스 사용
            안내</strong
          >
        </p>
        <p>
          본 서비스는 더 나은 사용자 경험을 제공하고 방문 통계를 분석하기 위해
          Google 애널리틱스(Google Analytics)를 사용합니다.
        </p>
        <p>
          Google 애널리틱스는 쿠키(Cookie)를 통해 익명의 방식으로 사용자의
          서비스 이용 정보를 수집합니다. 수집되는 정보(예: 접속 국가, 브라우저
          종류, 기기 유형 등)는 개인을 식별할 수 없으며, 오직 전체적인 사용
          패턴을 파악하여 서비스를 개선하기 위한 목적으로만 활용됩니다.
        </p>
        <p>
          Google이 정보를 수집하고 처리하는 방식에 대한 더 자세한 내용은
          <a
            href="https://www.google.com/policies/privacy/partners/"
            target="_blank"
            rel="noopener noreferrer"
            >"Google이 Google 서비스를 사용하는 사이트 또는 앱의 정보를 이용하는
            방법"</a
          >
          페이지에서 확인하실 수 있습니다.
        </p>
      </div>
    </div>
    <script>
      // 다국어 지원을 위한 번역 객체
      const translations = {
        ko: {
          title: "나의 1분은 몇 초일까? ⏱️",
          instructions: "아래 \"시작\" 버튼을 누르고 눈을 감은 채 마음속으로 1분(60초)을 세어보세요.<br />1분이 되었다고 생각하는 순간 버튼을 다시 누르거나 스페이스바를 누르세요.",
          startButton: "시작",
          stopButton: "정지 (1분이 되면 누르세요)",
          measuring: "측정 중...",
          resultTitle: "테스트 결과",
          tryAgain: "다시 테스트하기",
          privacyPolicy: "개인정보 처리방침",
          resultText: seconds => `당신의 1분은 ${seconds}초 입니다!`,
          classifications: {
            fast: "매우 빠른 내적 시계를 가지고 계시네요! <strong>10-20대</strong>의 평균보다 빠른 결과입니다.",
            teens: "<strong>10-20대</strong>의 평균적인 시간 감각과 비슷합니다.",
            thirties: "<strong>30-40대</strong>의 평균적인 시간 감각과 비슷합니다.",
            fifties: "<strong>50-60대</strong>의 평균적인 시간 감각과 비슷합니다.",
            seventies: "<strong>70대 이상</strong>의 평균적인 시간 감각과 비슷합니다."
          },
          privacy: {
            title: "개인정보 처리방침",
            content: "'나의 1분은 몇 초일까? - 시간 인지 능력 테스트'(이하 '서비스')는 귀하의 개인정보를 소중하게 생각하며, 개인정보 보호 관련 법규를 준수하고 있습니다. 본 서비스는 별도의 회원가입 절차 없이 익명으로 이용 가능하며, 개인을 식별할 수 있는 어떠한 정보도 수집하지 않습니다.",
            analytics: {
              title: "서비스 품질 향상 및 통계 분석을 위한 Google 애널리틱스 사용 안내",
              description: "본 서비스는 더 나은 사용자 경험을 제공하고 방문 통계를 분석하기 위해 Google 애널리틱스(Google Analytics)를 사용합니다.",
              details: "Google 애널리틱스는 쿠키(Cookie)를 통해 익명의 방식으로 사용자의 서비스 이용 정보를 수집합니다. 수집되는 정보(예: 접속 국가, 브라우저 종류, 기기 유형 등)는 개인을 식별할 수 없으며, 오직 전체적인 사용 패턴을 파악하여 서비스를 개선하기 위한 목적으로만 활용됩니다.",
              moreInfo: "Google이 정보를 수집하고 처리하는 방식에 대한 더 자세한 내용은 \"Google이 Google 서비스를 사용하는 사이트 또는 앱의 정보를 이용하는 방법\" 페이지에서 확인하실 수 있습니다."
            }
          }
        },
        en: {
          title: "How Long is Your 1 Minute? ⏱️",
          instructions: "Click the \"Start\" button and count 1 minute (60 seconds) in your mind with your eyes closed.<br />Press the button again or hit the spacebar when you think 1 minute has passed.",
          startButton: "Start",
          stopButton: "Stop (when you think it's been 1 minute)",
          measuring: "Measuring...",
          resultTitle: "Test Results",
          tryAgain: "Try Again",
          privacyPolicy: "Privacy Policy",
          resultText: seconds => `Your 1 minute is ${seconds} seconds!`,
          classifications: {
            fast: "You have a very fast internal clock! Your result is faster than the <strong>10-20s</strong> age group average.",
            teens: "Your time perception is similar to the <strong>10-20s</strong> age group average.",
            thirties: "Your time perception is similar to the <strong>30-40s</strong> age group average.",
            fifties: "Your time perception is similar to the <strong>50-60s</strong> age group average.",
            seventies: "Your time perception is similar to the <strong>70+</strong> age group average."
          },
          privacy: {
            title: "Privacy Policy",
            content: "The 'How Long is Your 1 Minute? - Time Perception Test' (hereinafter 'Service') values your privacy and complies with privacy protection regulations. This service can be used anonymously without any registration process, and we do not collect any information that can identify individuals.",
            analytics: {
              title: "Google Analytics Usage Notice for Service Quality Improvement and Statistical Analysis",
              description: "This service uses Google Analytics to provide better user experience and analyze visit statistics.",
              details: "Google Analytics collects service usage information anonymously through cookies. The collected information (e.g., access country, browser type, device type, etc.) cannot identify individuals and is only used to understand overall usage patterns and improve the service.",
              moreInfo: "For more information about how Google collects and processes data, please visit the \"How Google uses information from sites or apps that use our services\" page."
            }
          }
        }
      };

      document.addEventListener("DOMContentLoaded", () => {
        // 초기화 시 모달 강제로 숨기기
        const modalElement = document.getElementById("privacy-modal");
        modalElement.style.display = "none";
        modalElement.classList.add("hidden");

        // Get all necessary DOM elements
        const timerSection = document.getElementById("timer-section");
        const resultSection = document.getElementById("result-section");
        const languageSelect = document.getElementById("languageSelect");

        // 언어 변경 이벤트 핸들러
        const updateLanguage = (lang) => {
          document.querySelector("h1").innerHTML = translations[lang].title;
          document.querySelector(".instructions").innerHTML = translations[lang].instructions;
          timerButton.textContent = translations[lang].startButton;
          document.querySelector("#result-section h2").textContent = translations[lang].resultTitle;
          document.getElementById("tryAgainButton").textContent = translations[lang].tryAgain;
          document.getElementById("privacy-link").textContent = translations[lang].privacyPolicy;
          
          // Privacy policy modal translation
          document.querySelector(".modal-content h2").textContent = translations[lang].privacy.title;
          const modalContentPs = document.querySelectorAll(".modal-content p");
          modalContentPs[0].textContent = translations[lang].privacy.content;
          modalContentPs[1].innerHTML = `<strong>${translations[lang].privacy.analytics.title}</strong>`;
          modalContentPs[2].textContent = translations[lang].privacy.analytics.description;
          modalContentPs[3].textContent = translations[lang].privacy.analytics.details;
          const googleLink = document.createElement('a');
          googleLink.href = 'https://www.google.com/policies/privacy/partners/';
          googleLink.target = '_blank';
          googleLink.rel = 'noopener noreferrer';
          
          const lastP = modalContentPs[4];
          const text = translations[lang].privacy.analytics.moreInfo;
          const splitPoint = text.indexOf('"');
          
          lastP.textContent = text.substring(0, splitPoint);
          googleLink.textContent = lang === 'ko' ? 
            '"Google이 Google 서비스를 사용하는 사이트 또는 앱의 정보를 이용하는 방법"' :
            '"How Google uses information from sites or apps that use our services"';
          lastP.appendChild(googleLink);
          lastP.appendChild(document.createTextNode(text.substring(text.lastIndexOf('"') + 1)));
          
          if (isTimerRunning) {
            timerButton.textContent = translations[lang].stopButton;
            display.textContent = translations[lang].measuring;
          }
        };

        languageSelect.addEventListener("change", (e) => {
          updateLanguage(e.target.value);
        });

        const timerButton = document.getElementById("timerButton");
        const display = document.getElementById("display");
        const userResult = document.getElementById("userResult");
        const tryAgainButton = document.getElementById("tryAgainButton");

        // Modal elements
        const privacyModal = document.getElementById("privacy-modal");
        const privacyLink = document.getElementById("privacy-link");
        const closeButton = document.getElementById("close-button");

        // Application state variables
        let startTime = 0;
        let elapsedTime = 0;
        let isTimerRunning = false;

        // Function to handle starting and stopping the timer
        const handleTimer = () => {
          const currentLang = languageSelect.value;
          
          if (!isTimerRunning) {
            // Start the timer
            startTime = Date.now();
            isTimerRunning = true;
            timerButton.textContent = translations[currentLang].stopButton;
            timerButton.classList.add("running");
            display.textContent = translations[currentLang].measuring;
          } else {
            // Stop the timer
            elapsedTime = (Date.now() - startTime) / 1000;
            isTimerRunning = false;

            // Get classifications based on current language
            let classification = "";
            if (elapsedTime < 55) {
              classification = translations[currentLang].classifications.fast;
            } else if (elapsedTime <= 65) {
              classification = translations[currentLang].classifications.teens;
            } else if (elapsedTime <= 72) {
              classification = translations[currentLang].classifications.thirties;
            } else if (elapsedTime <= 80) {
              classification = translations[currentLang].classifications.fifties;
            } else {
              classification = translations[currentLang].classifications.seventies;
            }

            // Display the result and classification
            const resultText = translations[currentLang].resultText(elapsedTime.toFixed(2));
            userResult.innerHTML = `<span class="time-value">${resultText}</span>${classification}`;

            // Transition to the result screen
            timerSection.classList.add("hidden");
            resultSection.classList.remove("hidden");
          }
        };

        // Function to handle spacebar key press to stop the timer
        const handleKeyPress = (e) => {
          if (e.code === "Space" && isTimerRunning) {
            e.preventDefault(); // Prevent default spacebar action (like scrolling)
            handleTimer();
          }
        };

        // Function to reset the test for another try
        const resetTest = () => {
          resultSection.classList.add("hidden");
          timerSection.classList.remove("hidden");
          timerButton.textContent = translations[languageSelect.value].startButton;
          timerButton.classList.remove("running");
          display.textContent = "";
          elapsedTime = 0;
        };

        // Modal control logic
        const openModal = () => {
          privacyModal.classList.remove("hidden");
        };

        const closeModal = () => {
          privacyModal.classList.add("hidden");
        };

        // 팝업이 열린 상태로 시작되는 것을 방지 (중복 방지)
        if (!privacyModal.classList.contains("hidden")) {
          privacyModal.classList.add("hidden");
        }

        // Attach all event listeners
        timerButton.addEventListener("click", handleTimer);
        document.addEventListener("keydown", handleKeyPress);
        tryAgainButton.addEventListener("click", resetTest);

        // Modal event listeners
        privacyLink.addEventListener("click", () => {
          privacyModal.style.display = "flex";
          privacyModal.classList.remove("hidden");
        });
        
        const handleCloseModal = () => {
          privacyModal.style.display = "none";
          privacyModal.classList.add("hidden");
        };
        
        closeButton.addEventListener("click", handleCloseModal);
        privacyModal.addEventListener("click", (event) => {
          if (event.target === privacyModal) {
            handleCloseModal();
          }
        });
      });
    </script>
  </body>
</html>
